<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CAENScope: V1740_board.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>V1740_board.cpp</h1><a href="_v1740__board_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 <span class="comment">// Name:        V1740_board.cpp</span>
<a name="l00003"></a>00003 <span class="comment">// Purpose:     </span>
<a name="l00004"></a>00004 <span class="comment">// Author:      NDA</span>
<a name="l00005"></a>00005 <span class="comment">// Modified by: </span>
<a name="l00006"></a>00006 <span class="comment">// Created:     04/03/06 14:18:40</span>
<a name="l00007"></a>00007 <span class="comment">// RCS-ID:      </span>
<a name="l00008"></a>00008 <span class="comment">// Copyright:   CAEN S.p.A. All rights reserved</span>
<a name="l00009"></a>00009 <span class="comment">// Licence:     </span>
<a name="l00011"></a>00011 <span class="comment"></span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="preprocessor">#if defined(__GNUG__) &amp;&amp; !defined(__APPLE__)</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span><span class="preprocessor">#pragma implementation &quot;V1740_board.h&quot;</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span>
<a name="l00017"></a>00017 <span class="comment">// For compilers that support precompilation, includes &quot;wx/wx.h&quot;.</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &quot;wx/wxprec.h&quot;</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#ifdef __BORLANDC__</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#pragma hdrstop</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span>
<a name="l00024"></a>00024 <span class="preprocessor">#ifndef WX_PRECOMP</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span><span class="preprocessor">#include &quot;wx/wx.h&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#endif</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="_v1740__board_8h.html">V1740_board.h</a>&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="_v17_x_x__board__channel_8h.html">V17XX_board_channel.h</a>&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="_v1740__board__channel_8h.html">V1740_board_channel.h</a>&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="appsettings_8h.html">appsettings.h</a>&quot;</span>
<a name="l00032"></a>00032 
<a name="l00033"></a><a class="code" href="class_v1740_board.html#a5235a6877315a7ef5e8c0f1b4bd30ecf">00033</a> <a class="code" href="class_v1740_board.html#a5235a6877315a7ef5e8c0f1b4bd30ecf">V1740Board::V1740Board</a>( <span class="keywordtype">int</span> board_index, <span class="keywordtype">void</span> (*scope_refresh)( <span class="keywordtype">int</span>, <span class="keywordtype">bool</span>), <span class="keywordtype">void</span> (*update_samples_ready_led)( <span class="keywordtype">bool</span>), wxMutex *p_data_mutex, <a class="code" href="class_app_settings.html">AppSettings</a> *p_app_settings, <a class="code" href="class_v17_x_x_board.html#a80e490721eb1a21961d6ba35f8502b40">V17XXBoard::BOARD_VARIANT</a> board_variant): 
<a name="l00034"></a>00034                         <a class="code" href="class_v17_x_x_board.html">V17XXBoard</a>( board_index, scope_refresh, update_samples_ready_led, p_data_mutex, p_app_settings, board_variant)
<a name="l00035"></a>00035 {
<a name="l00036"></a>00036 }
<a name="l00037"></a><a class="code" href="class_v1740_board.html#ab5bf20af3c6f3aaa1ae79ec5ffa929ef">00037</a> <span class="keywordtype">bool</span> <a class="code" href="class_v1740_board.html#ab5bf20af3c6f3aaa1ae79ec5ffa929ef">V1740Board::GetBoardMemory</a>( <a class="code" href="cvt__common__defs_8h.html#ae1e6edbbc26d6fbc71a90190d0266018" title="Unsigned 32 bit word.">UINT32</a> &amp;num_ksamples_per_channel)
<a name="l00038"></a>00038 {
<a name="l00039"></a>00039         <a class="code" href="cvt__common__defs_8h.html#ae1e6edbbc26d6fbc71a90190d0266018" title="Unsigned 32 bit word.">UINT32</a> reg_value32= 0;
<a name="l00040"></a>00040         <span class="comment">// </span>
<a name="l00041"></a>00041         <span class="comment">// read the board id</span>
<a name="l00042"></a>00042         <span class="keywordflow">if</span>( !<a class="code" href="cvt__board__commons_8h.html#a80879668ba2ef9cac1c11a1eb22d427c" title="Reads a register from VME board.">cvt_read</a>( this-&gt;<a class="code" href="class_generic_board.html#a5b6fc088bbe698faa4b52894f2f73a03">m_p_data</a>, <a class="code" href="cvt___v1724_8h.html#a28094e257c1a50e263d651121321ae4e" title="Board&amp;#39;s information register relative address.">CVT_V1724_BOARD_INFO_ADD</a>, &amp;reg_value32, <a class="code" href="cvt___v1724_8h.html#ad91fa93dd184c4ea1e5bb665546c9ce1" title="Board&amp;#39;s information register address modifier.">CVT_V1724_BOARD_INFO_AM</a>, <a class="code" href="cvt___v1724_8h.html#a2fdd9c6826ef6b218e06540d099e1b34" title="Board&amp;#39;s information register data size.">CVT_V1724_BOARD_INFO_DATA_SIZE</a>))
<a name="l00043"></a>00043         {
<a name="l00044"></a>00044                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00045"></a>00045         }
<a name="l00046"></a>00046 
<a name="l00047"></a>00047         num_ksamples_per_channel= ( <a class="code" href="cvt___v1724_8h.html#a67b347b358fb483d2dae5b888f707418" title="Extract the channel block size (as number of KWORD 32) from UINT32 value.">CVT_V1724_GET_BRDINF_BLOCK_SIZE_KW</a>( reg_value32)* 36 <span class="comment">/* bits per word*/</span>)/4 <span class="comment">/* bits per nibble */</span> / 3 <span class="comment">/* bits per sample */</span>;
<a name="l00048"></a>00048         num_ksamples_per_channel/= <a class="code" href="cvt___v1724_8h.html#a52424a7bd269c27f352cca52d6b8f81a" title="The number of channels.">CVT_V1724_MAX_CHANNEL</a>;
<a name="l00049"></a>00049 
<a name="l00050"></a>00050         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00051"></a>00051 }
<a name="l00052"></a><a class="code" href="class_v1740_board.html#ab5aa4ce724c23ec25cc4d3a1e20745ab">00052</a> <a class="code" href="class_generic_board_channel.html">GenericBoardChannel</a>* <a class="code" href="class_v1740_board.html#ab5aa4ce724c23ec25cc4d3a1e20745ab">V1740Board::CreateChannel</a>( <span class="keywordtype">int</span> ch_index, <span class="keywordtype">void</span> (* scope_refresh)( <span class="keywordtype">int</span>, <span class="keywordtype">bool</span>), wxMutex *p_data_mutex)
<a name="l00053"></a>00053 {
<a name="l00054"></a>00054         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_v1740_board_channel.html">V1740BoardChannel</a>( <span class="keyword">this</span>, ch_index, this-&gt;<a class="code" href="class_generic_board.html#a5b6fc088bbe698faa4b52894f2f73a03">m_p_data</a>, scope_refresh, p_data_mutex, this-&gt;<a class="code" href="class_generic_board.html#a70b0225094b644ff787a6301c8ccc0c2">m_p_app_settings</a>);
<a name="l00055"></a>00055 }
<a name="l00056"></a><a class="code" href="class_v1740_board.html#a951e14d9f8a61ff7d333ef1a100471d8">00056</a> <span class="keywordtype">bool</span> <a class="code" href="class_v1740_board.html#a951e14d9f8a61ff7d333ef1a100471d8">V1740Board::LoadConfig</a>( wxConfigBase* p_config, <span class="keyword">const</span> wxString&amp; base_section)
<a name="l00057"></a>00057 {
<a name="l00058"></a>00058         <span class="comment">/*</span>
<a name="l00059"></a>00059 <span class="comment">                Application setting board parameters&#39; file structure</span>
<a name="l00060"></a>00060 <span class="comment"></span>
<a name="l00061"></a>00061 <span class="comment">              |- ADDRESS= 0xee00                                // Hex board base address</span>
<a name="l00062"></a>00062 <span class="comment">          |- NUM_CHANNEL= N                                     </span>
<a name="l00063"></a>00063 <span class="comment">          |- NUM_VIRTUAL_CHANNEL= M                                     </span>
<a name="l00064"></a>00064 <span class="comment">          |- CHANNEL_GROUP= ##                                  </span>
<a name="l00065"></a>00065 <span class="comment">          |- [0]</span>
<a name="l00066"></a>00066 <span class="comment">          |   |- { CHANNEL DATA }</span>
<a name="l00067"></a>00067 <span class="comment">                  |   | ...</span>
<a name="l00068"></a>00068 <span class="comment">          |- [N-1]</span>
<a name="l00069"></a>00069 <span class="comment">          |   |- { CHANNEL DATA }</span>
<a name="l00070"></a>00070 <span class="comment">          |- [VIRT_0]</span>
<a name="l00071"></a>00071 <span class="comment">          |   |- { VIRTUAL CHANNEL DATA }</span>
<a name="l00072"></a>00072 <span class="comment">                  |   | ...</span>
<a name="l00073"></a>00073 <span class="comment">          |- [VIRT_(M-1)]</span>
<a name="l00074"></a>00074 <span class="comment">          |   |- { VIRTUAL CHANNEL DATA }</span>
<a name="l00075"></a>00075 <span class="comment">        */</span>
<a name="l00076"></a>00076         <span class="keywordflow">if</span>( this-&gt;<a class="code" href="class_generic_board.html#a5b6fc088bbe698faa4b52894f2f73a03">m_p_data</a>== NULL) 
<a name="l00077"></a>00077                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00078"></a>00078         <span class="comment">//</span>
<a name="l00079"></a>00079         <span class="comment">// Get the board address</span>
<a name="l00080"></a>00080         wxString board_add_string= _(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00081"></a>00081         p_config-&gt;Read( base_section+ _(<span class="stringliteral">&quot;ADDRESS&quot;</span>), &amp;board_add_string, _(<span class="stringliteral">&quot;0&quot;</span>));
<a name="l00082"></a>00082         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> board_add= 0;
<a name="l00083"></a>00083         wxString hex_part;
<a name="l00084"></a>00084         <span class="keywordflow">if</span>( board_add_string.Upper().StartsWith(_(<span class="stringliteral">&quot;0X&quot;</span>), &amp;hex_part))
<a name="l00085"></a>00085         {
<a name="l00086"></a>00086                 <span class="comment">// Hex format</span>
<a name="l00087"></a>00087                 <span class="keywordflow">if</span>( !hex_part.Trim().ToULong( &amp;board_add, 16))
<a name="l00088"></a>00088                 {
<a name="l00089"></a>00089                         board_add= 0;
<a name="l00090"></a>00090                 }
<a name="l00091"></a>00091         }
<a name="l00092"></a>00092         <span class="keywordflow">else</span>
<a name="l00093"></a>00093         {
<a name="l00094"></a>00094                 <span class="comment">// Decimal format</span>
<a name="l00095"></a>00095                 <span class="keywordflow">if</span>( !board_add_string.Trim().ToULong( &amp;board_add, 10))
<a name="l00096"></a>00096                 {
<a name="l00097"></a>00097                         board_add= 0;
<a name="l00098"></a>00098                 }
<a name="l00099"></a>00099         }
<a name="l00100"></a>00100         this-&gt;<a class="code" href="class_generic_board.html#a5b6fc088bbe698faa4b52894f2f73a03">m_p_data</a>-&gt;<a class="code" href="structcvt__board__data.html#a6aaff7a11a79af20b186209e16576986" title="Base address.">m_base_address</a>= (<a class="code" href="cvt__common__defs_8h.html#a09f1a1fb2293e33483cc8d44aefb1eb1" title="Unsigned 16 bit word.">UINT16</a>)board_add;
<a name="l00101"></a>00101 
<a name="l00102"></a>00102         <span class="comment">//</span>
<a name="l00103"></a>00103         <span class="comment">// Get the Channel group</span>
<a name="l00104"></a>00104         p_config-&gt;Read( base_section+ _(<span class="stringliteral">&quot;CHANNEL_GROUP&quot;</span>), &amp;this-&gt;<a class="code" href="class_v1740_board.html#ac1ced466aa2a6c46e46fc29d9a69834d">m_channel_group</a>, 0);
<a name="l00105"></a>00105         <span class="comment">//</span>
<a name="l00106"></a>00106         <span class="comment">// Get the Channel Number</span>
<a name="l00107"></a>00107         <span class="keywordtype">int</span> channel_number= 0;
<a name="l00108"></a>00108         p_config-&gt;Read( base_section+ _(<span class="stringliteral">&quot;NUM_CHANNEL&quot;</span>), &amp;channel_number, 0);
<a name="l00109"></a>00109         <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i= 0; i&lt; channel_number; i++)
<a name="l00110"></a>00110         {
<a name="l00111"></a>00111                 <span class="comment">//</span>
<a name="l00112"></a>00112                 <span class="comment">// Get Channel specific parameters</span>
<a name="l00113"></a>00113                 wxString channel_string= wxString::Format( <span class="stringliteral">&quot;%s%i/&quot;</span>, base_section.c_str(), i);
<a name="l00114"></a>00114                 this-&gt;<a class="code" href="class_generic_board.html#ad9e8974674ad57850b4bcf5b46053d5a">m_channel_array</a>.Add( this-&gt;<a class="code" href="class_v1740_board.html#ab5aa4ce724c23ec25cc4d3a1e20745ab">CreateChannel</a>( i+ ( this-&gt;<a class="code" href="class_v1740_board.html#ac1ced466aa2a6c46e46fc29d9a69834d">m_channel_group</a>* <a class="code" href="cvt___v1724_8h.html#a52424a7bd269c27f352cca52d6b8f81a" title="The number of channels.">CVT_V1724_MAX_CHANNEL</a>) , this-&gt;<a class="code" href="class_generic_board.html#ae40bb3cab816ef28ede341ff2b9032b9">ScopeRefresh</a>, this-&gt;<a class="code" href="class_generic_board.html#a7225ecca45378b3830a532392e052571">m_p_data_mutex</a>));
<a name="l00115"></a>00115                 <span class="comment">//</span>
<a name="l00116"></a>00116                 <span class="comment">// Load channel section</span>
<a name="l00117"></a>00117                 <span class="keywordflow">if</span>( !((<a class="code" href="class_generic_board_channel.html">GenericBoardChannel</a>*)this-&gt;<a class="code" href="class_generic_board.html#ad9e8974674ad57850b4bcf5b46053d5a">m_channel_array</a>[i])-&gt;<a class="code" href="class_v1740_board.html#a951e14d9f8a61ff7d333ef1a100471d8">LoadConfig</a>( p_config, channel_string))
<a name="l00118"></a>00118                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00119"></a>00119         }
<a name="l00120"></a>00120         <span class="comment">//</span>
<a name="l00121"></a>00121         <span class="comment">// Get the Virtual Channel Number</span>
<a name="l00122"></a>00122         <span class="keywordtype">int</span> virtual_channel_number= 0;
<a name="l00123"></a>00123         p_config-&gt;Read( base_section+ _(<span class="stringliteral">&quot;NUM_VIRTUAL_CHANNEL&quot;</span>), &amp;virtual_channel_number, 0);
<a name="l00124"></a>00124         <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i= 0; i&lt; virtual_channel_number; i++)
<a name="l00125"></a>00125         {
<a name="l00126"></a>00126                 <span class="comment">//</span>
<a name="l00127"></a>00127                 <span class="comment">// Get Virtual Channel specific parameters</span>
<a name="l00128"></a>00128                 wxString channel_string= wxString::Format( <span class="stringliteral">&quot;%sVIRT_%i/&quot;</span>, base_section.c_str(), i);
<a name="l00129"></a>00129                 this-&gt;<a class="code" href="class_generic_board.html#a635e7843f3b445634f71a2d42e010e86">m_virtual_channel_array</a>.Add( this-&gt;<a class="code" href="class_generic_board.html#afeaafe37d076623c5be4b31df7f1c1e2">CreateVirtualChannel</a>( i, this-&gt;<a class="code" href="class_generic_board.html#ae40bb3cab816ef28ede341ff2b9032b9">ScopeRefresh</a>, this-&gt;<a class="code" href="class_generic_board.html#a7225ecca45378b3830a532392e052571">m_p_data_mutex</a>));
<a name="l00130"></a>00130                 <span class="comment">//</span>
<a name="l00131"></a>00131                 <span class="comment">// Load Virtual channel section</span>
<a name="l00132"></a>00132                 <span class="keywordflow">if</span>( !((<a class="code" href="class_generic_board_channel.html">GenericBoardChannel</a>*)this-&gt;<a class="code" href="class_generic_board.html#a635e7843f3b445634f71a2d42e010e86">m_virtual_channel_array</a>[i])-&gt;<a class="code" href="class_v1740_board.html#a951e14d9f8a61ff7d333ef1a100471d8">LoadConfig</a>( p_config, channel_string))
<a name="l00133"></a>00133                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00134"></a>00134         }
<a name="l00135"></a>00135 
<a name="l00136"></a>00136         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 
<a name="l00139"></a>00139 }
<a name="l00140"></a><a class="code" href="class_v1740_board.html#a5652343439452085ff7ae098531f985b">00140</a> <span class="keywordtype">bool</span> <a class="code" href="class_v1740_board.html#a5652343439452085ff7ae098531f985b">V1740Board::SaveConfig</a>( wxConfigBase* p_config, <span class="keyword">const</span> wxString&amp; base_section)
<a name="l00141"></a>00141 {
<a name="l00142"></a>00142         <span class="keywordflow">if</span>( this-&gt;<a class="code" href="class_generic_board.html#a5b6fc088bbe698faa4b52894f2f73a03">m_p_data</a>== NULL)
<a name="l00143"></a>00143                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00144"></a>00144         <span class="comment">//</span>
<a name="l00145"></a>00145         <span class="comment">// Set the board address</span>
<a name="l00146"></a>00146         wxString board_add_string= wxString::Format( <span class="stringliteral">&quot;0x%04x&quot;</span>, this-&gt;<a class="code" href="class_generic_board.html#a5b6fc088bbe698faa4b52894f2f73a03">m_p_data</a>-&gt;<a class="code" href="structcvt__board__data.html#a6aaff7a11a79af20b186209e16576986" title="Base address.">m_base_address</a>);
<a name="l00147"></a>00147         <span class="keywordflow">if</span>( !p_config-&gt;Write( base_section+ _(<span class="stringliteral">&quot;ADDRESS&quot;</span>), board_add_string))
<a name="l00148"></a>00148                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00149"></a>00149 
<a name="l00150"></a>00150         <span class="comment">//</span>
<a name="l00151"></a>00151         <span class="comment">// Set the Channel group</span>
<a name="l00152"></a>00152         p_config-&gt;Write( base_section+ _(<span class="stringliteral">&quot;CHANNEL_GROUP&quot;</span>), this-&gt;<a class="code" href="class_v1740_board.html#ac1ced466aa2a6c46e46fc29d9a69834d">m_channel_group</a>);
<a name="l00153"></a>00153 
<a name="l00154"></a>00154         <span class="comment">//</span>
<a name="l00155"></a>00155         <span class="comment">// Set the Channel Number</span>
<a name="l00156"></a>00156         <span class="keywordflow">if</span>( !p_config-&gt;Write( base_section+ _(<span class="stringliteral">&quot;NUM_CHANNEL&quot;</span>), (<span class="keywordtype">int</span>)this-&gt;<a class="code" href="class_generic_board.html#ad9e8974674ad57850b4bcf5b46053d5a">m_channel_array</a>.GetCount()))
<a name="l00157"></a>00157                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00158"></a>00158         <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i= 0; i&lt; this-&gt;<a class="code" href="class_generic_board.html#ad9e8974674ad57850b4bcf5b46053d5a">m_channel_array</a>.GetCount(); i++)
<a name="l00159"></a>00159         {
<a name="l00160"></a>00160                 <span class="comment">//</span>
<a name="l00161"></a>00161                 <span class="comment">// Set Channel specific parameters</span>
<a name="l00162"></a>00162                 wxString channel_string= wxString::Format( <span class="stringliteral">&quot;%s%i/&quot;</span>, base_section.c_str(), i);
<a name="l00163"></a>00163                 <span class="comment">//</span>
<a name="l00164"></a>00164                 <span class="comment">// Save channel section</span>
<a name="l00165"></a>00165                 <span class="keywordflow">if</span>( !((<a class="code" href="class_generic_board_channel.html">GenericBoardChannel</a>*)this-&gt;<a class="code" href="class_generic_board.html#ad9e8974674ad57850b4bcf5b46053d5a">m_channel_array</a>[i])-&gt;SaveConfig( p_config, channel_string))
<a name="l00166"></a>00166                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00167"></a>00167         }
<a name="l00168"></a>00168 
<a name="l00169"></a>00169         <span class="comment">//</span>
<a name="l00170"></a>00170         <span class="comment">// Set the Virtual Channel Number</span>
<a name="l00171"></a>00171         <span class="keywordflow">if</span>( !p_config-&gt;Write( base_section+ _(<span class="stringliteral">&quot;NUM_VIRTUAL_CHANNEL&quot;</span>), (<span class="keywordtype">int</span>)this-&gt;<a class="code" href="class_generic_board.html#a635e7843f3b445634f71a2d42e010e86">m_virtual_channel_array</a>.GetCount()))
<a name="l00172"></a>00172                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00173"></a>00173         <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i= 0; i&lt; this-&gt;<a class="code" href="class_generic_board.html#a635e7843f3b445634f71a2d42e010e86">m_virtual_channel_array</a>.GetCount(); i++)
<a name="l00174"></a>00174         {
<a name="l00175"></a>00175                 <span class="comment">//</span>
<a name="l00176"></a>00176                 <span class="comment">// Set Virtual Channel specific parameters</span>
<a name="l00177"></a>00177                 wxString channel_string= wxString::Format( <span class="stringliteral">&quot;%sVIRT_%i/&quot;</span>, base_section.c_str(), i);
<a name="l00178"></a>00178                 <span class="comment">//</span>
<a name="l00179"></a>00179                 <span class="comment">// Save Virtual channel section</span>
<a name="l00180"></a>00180                 <span class="keywordflow">if</span>( !((<a class="code" href="class_generic_board_channel.html">GenericBoardChannel</a>*)this-&gt;<a class="code" href="class_generic_board.html#a635e7843f3b445634f71a2d42e010e86">m_virtual_channel_array</a>[i])-&gt;SaveConfig( p_config, channel_string))
<a name="l00181"></a>00181                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00182"></a>00182         }
<a name="l00183"></a>00183         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00184"></a>00184 }
<a name="l00185"></a><a class="code" href="class_v1740_board.html#aa79fd2ed7fe049173df96a7828d04eb9">00185</a> <span class="keywordtype">bool</span> <a class="code" href="class_v1740_board.html#aa79fd2ed7fe049173df96a7828d04eb9">V1740Board::WriteSampleBufferSize</a>( <span class="keywordtype">void</span>)
<a name="l00186"></a>00186 {
<a name="l00187"></a>00187         <a class="code" href="cvt___v1724_8h.html#a8bfce99d304af1f56ccd640cf8dea682" title="The number for blocks.">CVT_V1724_NUM_BLOCKS</a> num_block_written;
<a name="l00188"></a>00188         <a class="code" href="cvt__common__defs_8h.html#a09f1a1fb2293e33483cc8d44aefb1eb1" title="Unsigned 16 bit word.">UINT16</a> num_k_samples= ( <a class="code" href="cvt__common__defs_8h.html#a09f1a1fb2293e33483cc8d44aefb1eb1" title="Unsigned 16 bit word.">UINT16</a>)( <a class="code" href="cvt__common__defs_8h.html#ae1e6edbbc26d6fbc71a90190d0266018" title="Unsigned 32 bit word.">UINT32</a>)(( <a class="code" href="cvt__common__defs_8h.html#ae1e6edbbc26d6fbc71a90190d0266018" title="Unsigned 32 bit word.">UINT32</a>)( this-&gt;<a class="code" href="class_generic_board.html#a70b0225094b644ff787a6301c8ccc0c2">m_p_app_settings</a>-&gt;<a class="code" href="class_app_settings.html#a3e3be0309a8e4e59cdd6f4867dd98ff0">m_num_sample</a>* <a class="code" href="cvt___v1724_8h.html#a52424a7bd269c27f352cca52d6b8f81a" title="The number of channels.">CVT_V1724_MAX_CHANNEL</a>)&gt;&gt; 10);
<a name="l00189"></a>00189         <span class="keywordflow">if</span>( !<a class="code" href="cvt___v1724_8h.html#a7ba3b7d78fe4cec660faa0bdd4a00462" title="Sets the maximum number of samples per events for each channel.">cvt_V1724_set_buffer_samples</a>( (<a class="code" href="structcvt___v1724__data.html" title="V1724 board data structure.">cvt_V1724_data</a>* )this-&gt;<a class="code" href="class_generic_board.html#a5b6fc088bbe698faa4b52894f2f73a03">m_p_data</a>, num_k_samples, &amp;num_block_written))
<a name="l00190"></a>00190                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00191"></a>00191         <span class="comment">// Adjust the X size to the buffer size really setted </span>
<a name="l00192"></a>00192         <span class="keywordflow">if</span>( !<a class="code" href="cvt___v1724_8h.html#a3a0b7e4efbafa259c60a4c7221d588a3" title="Returns the maximum number of samples per events for each channel.">cvt_V1724_get_buffer_samples</a>( (<a class="code" href="structcvt___v1724__data.html" title="V1724 board data structure.">cvt_V1724_data</a>* )this-&gt;<a class="code" href="class_generic_board.html#a5b6fc088bbe698faa4b52894f2f73a03">m_p_data</a>, &amp;num_k_samples, &amp;num_block_written))
<a name="l00193"></a>00193                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00194"></a>00194         this-&gt;<a class="code" href="class_generic_board.html#a70b0225094b644ff787a6301c8ccc0c2">m_p_app_settings</a>-&gt;<a class="code" href="class_app_settings.html#aa2e8145698fe6725991db0534959fadf">m_max_log_X</a>= (((int)num_k_samples)&lt;&lt; 10)/ <a class="code" href="cvt___v1724_8h.html#a52424a7bd269c27f352cca52d6b8f81a" title="The number of channels.">CVT_V1724_MAX_CHANNEL</a>;
<a name="l00195"></a>00195 
<a name="l00196"></a>00196         <span class="keywordflow">if</span>( !<a class="code" href="cvt___v1724_8h.html#a12a3a5ee51d0bc9e5a355364bac9599b" title="Setups the acquisition mode parameters.">cvt_V1724_set_acquisition_mode</a>( (<a class="code" href="structcvt___v1724__data.html" title="V1724 board data structure.">cvt_V1724_data</a>* )this-&gt;<a class="code" href="class_generic_board.html#a5b6fc088bbe698faa4b52894f2f73a03">m_p_data</a>, <span class="keyword">false</span>, num_block_written, <a class="code" href="cvt___v1724_8h.html#ad0d6189acd971bb5193112d6a3c0d287af3ee124d33623df3a9e6f74237e631e8">CVT_V1724_ACQCTRL_ACQ_MODE_REGISTER_CTRL</a>, <a class="code" href="cvt__common__defs_8h.html#aa93f0eb578d23995850d61f7d61c55c1" title="&amp;lt; Boolean TRUE value">FALSE</a>, 0))
<a name="l00197"></a>00197                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00198"></a>00198         <span class="keywordflow">return</span> <a class="code" href="cvt___v1724_8h.html#a162f2c241a1c0e31b7d1a77fc5ee2b2b" title="Performs a data clear.">cvt_V1724_data_clear</a>( (<a class="code" href="structcvt___v1724__data.html" title="V1724 board data structure.">cvt_V1724_data</a>* )this-&gt;<a class="code" href="class_generic_board.html#a5b6fc088bbe698faa4b52894f2f73a03">m_p_data</a>)!= FALSE;
<a name="l00199"></a>00199 }
<a name="l00200"></a><a class="code" href="class_v1740_board.html#a6bae56248a17acecd5e9cf7639598a2e">00200</a> <span class="keywordtype">bool</span> <a class="code" href="class_v1740_board.html#a6bae56248a17acecd5e9cf7639598a2e">V1740Board::DoStartAcquisition</a>( <span class="keywordtype">void</span>) {
<a name="l00201"></a>00201         <span class="keywordflow">if</span>( <a class="code" href="cvt___v1724_8h.html#aa7352ccd80eaefe0e27cdd04ca6f02a3" title="Setups data readout mode parameters.">cvt_V1724_set_readout_mode</a>( (<a class="code" href="structcvt___v1724__data.html" title="V1724 board data structure.">cvt_V1724_data</a>* )this-&gt;<a class="code" href="class_generic_board.html#a5b6fc088bbe698faa4b52894f2f73a03">m_p_data</a>, TRUE, 1)== <a class="code" href="cvt__common__defs_8h.html#aa93f0eb578d23995850d61f7d61c55c1" title="&amp;lt; Boolean TRUE value">FALSE</a>) {
<a name="l00202"></a>00202                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00203"></a>00203         }
<a name="l00204"></a>00204         <span class="keywordflow">return</span> <a class="code" href="cvt___v1724_8h.html#a8b77c6274c94a42590c2479d3cac4aa9" title="Starts the acquisition for the spcified channel mask.">cvt_V1724_start_acquisition</a>( (<a class="code" href="structcvt___v1724__data.html" title="V1724 board data structure.">cvt_V1724_data</a>* )this-&gt;m_p_data, 1&lt;&lt; this-&gt;<a class="code" href="class_v1740_board.html#ac1ced466aa2a6c46e46fc29d9a69834d">m_channel_group</a>)!= <a class="code" href="cvt__common__defs_8h.html#aa93f0eb578d23995850d61f7d61c55c1" title="&amp;lt; Boolean TRUE value">FALSE</a>;
<a name="l00205"></a>00205 }
<a name="l00206"></a>00206 
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Apr 1 12:08:02 2010 for CAENScope by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
